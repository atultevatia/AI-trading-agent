# Implement LangGraph Sector Scanning Agent

- [x] Design `sector_graph_code.py` with Map-Reduce Architecture <!-- id: 0 -->
    - [x] Define `OverallState` and `StockState` schemas
    - [x] Create `SectorLoader` node (Ticker Mapping)
    - [x] Create `StockAnalyst` node (TA + Sentiment + Risk)
    - [x] Create `Ranker` node (Filter + sort top 5)
- [x] Implement robust `yfinance` data fetching with error handling <!-- id: 1 -->
- [x] Update `app.py` to support Sector Input and Table Output <!-- id: 2 -->
- [x] Verify functionality with "AI" and "AUTO" sectors <!-- id: 3 -->
- [x] Implement Tiered Decision Logic (Strong/Watch/Monitor) in `sector_graph_code.py` <!-- id: 4 -->
- [x] Update `app.py` to display Tiers and Confidence <!-- id: 5 -->
- [x] Integrate Live NSE Sector Data (Replace hardcoded map) <!-- id: 6 -->
    - [x] Research python libraries for NSE indices (`nselib` or `yfinance` ^CNXAUTO etc)
    - [x] Update `SectorLoader` node to fetch dynamic constituents
    - [x] Update `app.py` sector selection dropdown
- [x] Integrate Real-Time News Sentiment <!-- id: 7 -->
    - [x] Install `feedparser`
    - [x] Create `news_engine.py` with caching and deduplication
    - [x] Update `sector_graph_code.py` to fetch real news
    - [x] Integrate sentiment scoring into LLM prompt
- [x] Pivot to Autonomous AI Trading Agent <!-- id: 8 -->
    - [x] Design Multi-Agent Architecture (Analyst, Risk Manager, Portfolio Manager)
    - [x] Implement `RiskManager` node for trade vetting
    - [x] Implement `PortfolioManager` node for dynamic allocation
    - [x] Enhance LLM prompts for agency and reasoning (remove hardcoded rules)
    - [x] Update Streamlit to show "Agent Reasoning Loops"
- [x] Performance Optimization <!-- id: 9 -->
    - [x] Implement Parallel LLM execution in `Analyst` node
    - [x] Implement Analysis Caching for stocks (TTL)
    - [x] Update `PortfolioManager` to handle larger batches efficiently
- [x] Advanced Speed Optimizations <!-- id: 10 -->
    - [x] Increase Concurrency to 15+ workers
    - [x] Merge Analyst and Risk Manager into a "Research Pipe" node to save sync overhead
    - [x] Add session-based constituent caching

